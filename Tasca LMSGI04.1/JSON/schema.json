{
	"$schema": "http://json-schema.org/draft-07/schema#",
	"title": "Esquema de CIFP Pau Casesnoves",
	"definitions": {
		"persona": {
			"type": "object",
			"properties": {
				"id": { "type": "integer" },
				"nom": { "type": "string" },
				"llinatges": { "type": "string" },
				"data_naixement": { "type": "string" },
				"correu": { "type": "string" },
				"telefon": { "type": "string" },
				"adreça": { "type": "string" }
			},
			"required": ["id", "nom", "llinatges"]
		}
	},
	"type": "object",
	"properties": {
		"cifp": {
			"type": "object",
			"properties": {
				"alumne": {
					"type": "array",
					"items": {
						"allOf": [
							{ "$ref": "#/definitions/persona" },
							{
								"type": "object",
								"properties": {
									"data_matricula": { "type": "string" },
									"curs": { 
										"type": "string", 
										"enum": ["DAM", "DAW", "ASIX", "SMX", "SEIA", "ER", "AUT"] 
									}
								},
								"required": ["data_matricula", "curs"]
							}
						]
						
					}
				},
				"professor": {
					"type": "array",
					"items": {
						"allOf": [
							{ "$ref": "#/definitions/persona" },
							{
								"type": "object",
								"properties": {
									"data_incorporació": { "type": "string" },
									"departament": { 
										"type": "string", 
										"enum": ["Informàtica", "Electricitat", "Automoció"] 
									},
									"assignatura": {
										"type": "array",
										"items": {	
											"type": "object",
											"properties": {
												"id_assignatura": { "type": "integer" },
												"nom_assignatura": { "type": "string" },
												"cicle": { 
													"type": "string", 
													"enum": ["DAM", "DAW", "ASIX", "SMX", "SEIA", "ER", "AUT"] 
												},
												"data_inici": { "type": "string" },
												"data_final": { "type": "string" }
											},
											"required": ["id_assignatura", "nom_assignatura", "cicle"],
											"additionalProperties": false
										}
									}
								},
								"required": ["data_incorporació", "departament"]
							}
						]	
					}
				}
			},
			"required": ["alumne", "professor"],
			"additionalProperties": false
		}
	},
	"required": ["cifp"],
	"additionalProperties": false
}